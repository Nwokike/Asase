{% extends 'base.html' %}

{% block title %}ASASE - Environmental Intelligence for Africa{% endblock %}

{% block content %}
<div class="container">
    <div class="row min-vh-100 align-items-center justify-content-center">
        <div class="col-lg-8 col-xl-6">
            <div class="text-center mb-5">
                <h1 class="display-3 fw-bold mb-3" style="color: var(--navy);">ASASE</h1>
                <p class="lead text-secondary mb-2">Earth Intelligence for Africa</p>
                <p class="text-muted">AI-Driven Environmental Risk Analysis</p>
            </div>

            <div class="glass-card p-4 p-md-5 mb-4">
                <form hx-post="/analysis/live-report/" 
                      hx-target="#analysis-results" 
                      hx-swap="innerHTML" 
                      hx-indicator="#loading"
                      class="mb-3">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="location" class="form-label fw-semibold" style="color: var(--navy);">
                            <i class="bi bi-geo-alt-fill me-2" style="color: var(--green-leaf);"></i>
                            Enter Location
                        </label>
                        <input 
                            type="text" 
                            class="form-control form-control-lg" 
                            id="location"
                            name="location" 
                            placeholder="e.g., Lagos, Nigeria"
                            required
                            style="border: 2px solid var(--navy); border-radius: 12px;"
                        >
                    </div>
                    <button type="submit" class="btn btn-lg w-100 text-white fw-semibold" style="background-color: var(--green-leaf); border-radius: 12px;">
                        <i class="bi bi-bar-chart-line me-2"></i>
                        Analyze Environment
                    </button>
                </form>

                <div id="loading" class="htmx-indicator text-center py-3">
                    <div class="spinner-border" style="color: var(--green-leaf);" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2 text-muted">Analyzing environmental data...</p>
                </div>
            </div>

            <div id="analysis-results"></div>

            <div class="text-center mt-4">
                <p class="text-muted mb-3">Our Focus Areas</p>
                <div class="d-flex flex-wrap justify-content-center gap-2">
                    <span class="badge bg-light text-dark px-3 py-2 rounded-pill">
                        <i class="bi bi-water me-1" style="color: var(--navy);"></i> Flood Risk
                    </span>
                    <span class="badge bg-light text-dark px-3 py-2 rounded-pill">
                        <i class="bi bi-wind me-1" style="color: var(--navy);"></i> Air Quality
                    </span>
                    <span class="badge bg-light text-dark px-3 py-2 rounded-pill">
                        <i class="bi bi-tree me-1" style="color: var(--green-leaf);"></i> Land Health (SDG 15)
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .htmx-indicator {
        display: none;
    }
    .htmx-request .htmx-indicator {
        display: block;
    }
    .htmx-request button {
        opacity: 0.6;
        pointer-events: none;
    }
</style>
{% endblock %}
